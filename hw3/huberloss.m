function L=huberloss(y,t,delta)
    L = arrayfun(@(m)...
        (abs(m-t)<=delta)* 0.5*(m-t)^2 +...
        (abs(m-t)>delta) * delta*(abs(m-t)-0.5*delta), y);
end